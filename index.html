<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图表生成</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2>图表设置</h2>

            <div class="control-group">
                <label for="chart-type">图表类型</label>
                <select id="chart-type">
                    <option value="bar">柱状图（分组）</option>
                    <option value="bar-stacked">柱状图（堆叠）</option>
                    <option value="line">折线图</option>
                    <option value="area">面积图</option>
                    <option value="area-stacked">堆积面积图</option>
                    <option value="pie">饼图</option>
                    <option value="donut">环形图</option>
                    <option value="histogram">直方图</option>
                    <option value="radar">雷达图 / 蜘蛛图</option>
                    <option value="bar-line">柱状折线混合图</option>
                    <option value="streamgraph">流图（Streamgraph）</option>
                    <option value="treemap">矩形树图（Treemap）</option>
                </select>
            </div>

            <div class="control-group">
                <label>图表方向</label>
                <div class="toggle-switch">
                    <button id="orientation-vertical" class="active">竖向</button>
                    <button id="orientation-horizontal">横向</button>
                </div>
            </div>

            <div id="mixed-types-group" class="control-group hidden">
                <label>混合图系列类型（为每个对比量选择柱/线）</label>
                <div id="mixed-types-container"></div>
            </div>

            <div id="single-series-wrap" class="control-group hidden">
                <label for="single-series-select">单系列选择（用于饼/环/直方图/树图）</label>
                <select id="single-series-select"></select>
            </div>

            <div id="donut-wrap" class="control-group hidden">
                <label for="donut-cutout">环形内径比例（%） <span id="donut-cutout-value">50</span></label>
                <input type="range" id="donut-cutout" min="0" max="80" value="50">
            </div>

            <div id="pie-size-wrap" class="control-group hidden">
                <label for="pie-radius">饼/环 半径大小（%） <span id="pie-radius-value">90</span></label>
                <input type="range" id="pie-radius" min="40" max="100" value="90">
            </div>

            <div id="area-opacity-wrap" class="control-group hidden">
                <label for="area-opacity">面积透明度（%） <span id="area-opacity-value">35</span></label>
                <input type="range" id="area-opacity" min="0" max="100" value="35">
            </div>

            <div id="hist-wrap" class="control-group hidden">
                <label for="hist-bins">直方图分箱数 <span id="hist-bins-value">10</span></label>
                <input type="range" id="hist-bins" min="3" max="30" value="10">
            </div>

            <div class="control-group">
                <label for="chart-title">图表标题</label>
                <input type="text" id="chart-title" value="我的图表">
            </div>

            <div class="control-group">
                <label>主题模式</label>
                <div class="toggle-switch">
                    <button id="theme-light" class="active">亮色</button>
                    <button id="theme-dark">暗色</button>
                </div>
            </div>

            <div class="control-group" id="axis-title-wrap">
                <h4>轴标题</h4>
                <label for="x-axis-title">X 轴标题</label>
                <input type="text" id="x-axis-title" placeholder="例如：时间 / 类别">
                <div class="control-group">
                    <button id="axis-swap-btn" class="inline-btn" title="互换 X 与 Y 左">↔ 互换</button>
                </div>
                <label for="y-axis-left-title">Y 轴左标题</label>
                <input type="text" id="y-axis-left-title" placeholder="例如：数量 / 值">
                <label for="y-axis-right-title">Y 轴右标题（双轴时）</label>
                <input type="text" id="y-axis-right-title" placeholder="例如：百分比 / 次数">
            </div>

            

            <div class="control-group">
                <label for="labels-input">标签（按顺序，逗号分隔）</label>
                <textarea id="labels-input" rows="3">数据点 1, 数据点 2, 数据点 3, 数据点 4, 数据点 5</textarea>
            </div>

            

            <div class="control-group">
                <label for="palette-select">一键配色方案</label>
                <select id="palette-select">
                    <option value="bright">明快 Bright</option>
                    <option value="pastel">马卡龙 Pastel</option>
                    <option value="ocean">海洋 Ocean</option>
                    <option value="sunset">日落 Sunset</option>
                    <option value="mint">薄荷 Mint</option>
                    <option value="warm">暖色 Warm</option>
                    <option value="cool">冷色 Cool</option>
                </select>
                <button id="apply-palette">应用配色</button>
            </div>

            

            <div class="control-group">
                <h4>导出</h4>
                <label for="export-type">格式</label>
                <select id="export-type">
                    <option value="png">PNG</option>
                    <option value="svg">SVG（矢量，适用于 D3 图）</option>
                </select>
                <label for="export-scale">分辨率倍率 <span id="export-scale-value">2</span>x</label>
                <input type="range" id="export-scale" min="1" max="4" value="2">
                <div class="control-group color-input">
                    <label for="export-bg">背景色</label>
                    <input type="color" id="export-bg" value="#FFFFFF">
                </div>
                <button id="export-image">导出图片</button>
            </div>

        </div>
        <div class="divider" aria-hidden="true"></div>
        <div class="main-content">
            <div class="chart-wrap">
                <canvas id="myChart"></canvas>
                <svg id="d3Chart" class="hidden"></svg>
            </div>
            <div id="chart-selected-label" class="chart-subnote hidden"></div>
        </div>
        <div class="divider" aria-hidden="true"></div>
        <div class="rightbar">
            <div id="data-controls">
                <h2>数据设置</h2>
                <div id="dataset-container">
                    <!-- Datasets will be added here dynamically -->
                </div>
                <button id="add-dataset">增加对比量</button>
                <button id="remove-dataset">减少对比量</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>